# Начало

Прежде чем создать свой `DrowpodwnMenu` следует определиться, как он будет работать, какие критерии ставим перед собой, чтоб по итогу быть уверенными, что результат вашей работы соответствует всем бизнес-требованиям или требованиям проекта.

Представим, что мы имеет техническое задание такого вида:

> Контент должен задаваться снаружи компонента. DropdownMenu должен уметь автоматически определять сторону открытия контента и раскрывать его по клику и ховеру в ту сторону, где будет больше места относительно триггера.
>
> Допустимые позиции:
>
> - вниз-вправо,
> - вверх-вправо,
> - вниз-влево,
> - вверх-влево.
>
> Сделайте триггер изменяемым и представьте его любым элементом интерфейса.
> Клик внутри контента не должен закрывать дропдаун, тогда как клик снаружи или повторный клик в триггер должны закрывать активный дропдаун.
>
> Активным дропдауном может быть только один дропдаун. Если открывается другой, текущий должен быть закрыт.
>
> Ширина контента дропдауна должна быть ограничена 260 пикселями.

Ниже разберём каждое из условий и решим, как его будет реализовывать.

# Реализация "на словах"

Перейдём к первому условию, что **контент должен задавться снаружи контента**. Здесь нам понадобится концеция `prop`s-ов из _React_. Если говорить очень упрощённо, это то же самое, что аттрибуты у _HTML_-элементов. Например, если взять стандартный _HTML_ элемент `a`, то у `<a href="https://example.com">Ссылка</a>` аттрибут _href_ - это и есть `prop`, само содержимое тега "_Ссылка_" - это тоже `prop`, просто оно задаётся не как аттрибут у _HTML_-элемента, а как контент, находящийся внутри нашего элемента.

Это значит, что **реализация компонента `DropdownMenu` почти ничего не должна знать о том, какой контент она должна отображать**, он должен быть динамическим, а значит, мы этот компонент сможем использовать в любом месте нашего приложения.

**DropdownMenu должен уметь автоматически определять сторону открытия контента** - здесь специфичных для _React_ вещей нам знать не нужно. Здесь нам понабоятся лишь базовые знания математики и простая логика (об этом будет чуть ниже).

**Сделайте триггер изменяемым и представьте его любым элементом интерфейса** - это значит, что содержимое нашего компонента ("тега") тоже должно быть динамичным. Как в примере с тегом `<a href="https://example.com">Ссылка</a>`, )_"Ссылка"_ - это наше содержимое, точно так же и в `DropdownMenu` мы должны иметь возможность обернуть наш тег во что угодно - и оно должно работать: при клике и при наведении открывать контент меню, который мы зададим заранее в качестве `prop`s-а.

**Активным дропдауном может быть только один дропдаун. Если открывается другой, текущий должен быть закрыт** - в этом случае мы должны иметь механизм, который будет следить, что сейчас на экране мы должны отображаь последнее активированное меню. Некое абстрактное _общее состояние_, ведь на экране может быть не один, а несколько одновременно доступных компонента `DropdownMenu`. Здесь нам понадобится такая возможность _React_ как `Context`. `Context` - это общее приложения или группы компонентов. Это как глобальное свойство, доступ к которому можно получить из любой точки _JavaScript_, но с дополнительными возможностями, такими как отслеживание изменений этого объекта. Например, как `window.localStorage` мы можем вызвать из любой точки _JavaScript_-приложения, так точно так же `Context` позволяет обращаться к некому состоянию внутри _React_-приложения.

# Реализация

```
!!! Для тех, кто будет читать это тестовое задание: учитвая, что я и так никаким образом не укладываюсь в 3-8 абзацев, далее я не буду подробно описывать каждый кусок кода, зачем и почему. В обычной статье я бы сделал это, но т. к. это тестовое, то я не буду. !!!
```

Теперь, когда мы имеем чёткое понимание механизмов, которые нужно использовать, приступим к реализации. Для начала нужно определиться, как же будет выглядеть компонент. Предлагаю такую структуру:

```jsx
<DropdownMenu content="Здесь должен быть список элементов меню">
  <button className="btn btn-primary">Я открываю меню</button>
</DropdownMenu>
```

Самый простой _React_-компонент с аттрибутом выглядит так:

```jsx
const MyComponent = (props) => {
  return (
    <div>
      {props.greeting} {props.children}
    </div>
  );
};
```

Это значит, что если мы в коде используем разметку такого вида,

```jsx
<main>
  <div className="container">
    <MyComponent greeting="Hello">
      <highlight>world</highlight>
    </MyComponent>
  </div>
</main>
```

то на выходе мы получим вот такой _HTML_:

```html
<main>
  <div className="container">
    <div>Hello <highlight>world</highlight></div>
  </div>
</main>
```

Здесь нужно понимать, что `props.children` - это встроенный в любой _React_-компонент `prop`. Это наша "_Ссылка_" из примера про тег `a`.

```
!!! Здесь должно быть описание реализации разметки через отрисовку контента Downdown-а в отдельном div-е за пределами корня нашего приложения и зачем я ипользую React.cloneElement (чтоб получить ref и не рисовать дополнительных тегов в разметке вокруг children-а), описание реализации логики, это всё занимает время и явно не укладывается в 3-8 абзаца. На мой взгляд компонент слишком сложный, чтоб объяснять на нём основы React и разжёвывать все с нуля, да и стиль написания текста, думаю, вы и так поняли, целую статью для этого писать не надо. !!!
```
